(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var o=t(0),s=t(1),c=t(18),r=t.n(c),a=t(20),l=t(19),u=t(9),i=t(3),d=function(e){var n=e.filterName,t=e.filterNames;return Object(o.jsx)("form",{children:Object(o.jsxs)("div",{children:["filter shown with: ",Object(o.jsx)("input",{value:n,onChange:t})]})})},j=function(e){var n=e.addName,t=e.newName,s=e.handleNameChange,c=e.newNumber,r=e.handleNumberChange;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:t,onChange:s})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:c,onChange:r})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},b=t(5),f=t.n(b),h="/api/persons",p=function(){return f.a.get(h).then((function(e){return e.data}))},m=function(e){return f.a.post(h,e).then((function(e){return e.data}))},O=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},g=function(e,n){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.person,t=e.setPersons,s=e.setDisplayPeople,c=(e.displaypeople,e.persons),r=e.setMessage,a=e.setSuccess;return Object(o.jsxs)("div",{children:[n.name," ",n.number,Object(o.jsx)("button",{onClick:function(e){if(e.preventDefault(),console.log("clicked delete",e),console.log("person is",n),window.confirm("Are you sure you want to delete the user?")){var o=c.filter((function(e){return e!==n}));console.log("newArr is",o),g(n.id).then((function(e){console.log("deletedP is",e),t(o),s(o)})).catch((function(e){console.log(e),a(!1),r("Information of ".concat(n.name," has already been removed from the server"))})),t(o),s(o)}},children:"delete"})]})},x=function(e){var n=e.displayPeople,t=e.setPersons,s=e.setDisplayPeople,c=e.persons,r=e.setMessage,a=e.setSuccess;return Object(o.jsx)("div",{children:n.map((function(e){return Object(o.jsx)(v,{person:e,setPersons:t,setDisplayPeople:s,displayPeople:n,persons:c,setMessage:r,setSuccess:a},e.id)}))})},N=(t(43),function(e){var n=e.message,t=e.success;return null===n?null:t?Object(o.jsx)("div",{className:"success",children:n}):Object(o.jsx)("div",{className:"error",children:n})}),w=function(e,n){return n.find((function(n){return e.toLowerCase()===n.name.toLowerCase()}))},y=function(){var e=Object(s.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(s.useState)(""),b=Object(i.a)(r,2),f=b[0],h=b[1],g=Object(s.useState)(""),v=Object(i.a)(g,2),y=v[0],P=v[1],D=Object(s.useState)(""),S=Object(i.a)(D,2),C=S[0],k=S[1],A=Object(s.useState)(t),E=Object(i.a)(A,2),T=E[0],I=E[1],L=Object(s.useState)(null),M=Object(i.a)(L,2),G=M[0],J=M[1],B=Object(s.useState)(null),U=Object(i.a)(B,2),q=U[0],z=U[1];Object(s.useEffect)((function(){p().then((function(e){console.log("getting contacts",e),c(e),I(e)}))}),[]);var F=function(e){c(e),I(e),h(""),P("")},H=function(e,n){J("person ".concat(e.name," has been ").concat(n,"!")),setTimeout((function(){J(null)}),5e3)};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(N,{message:G,success:q}),Object(o.jsx)(d,{filterName:C,filterNames:function(e){var n=e.target.value.toLowerCase();console.log(n);var o=[];console.log("persons are ",t);var s,c=Object(l.a)(t);try{for(c.s();!(s=c.n()).done;){var r=s.value,u=r.name.toLowerCase().split(" "),i=Object(a.a)(u),d=i[0],j=i.slice(1);j=j.join(""),d.includes(n)||j.includes(n)?(console.log("includes!!"),console.log(d,j,"<- includes"),console.log("person is",r),o.push(r)):console.log("doesnt")}}catch(b){c.e(b)}finally{c.f()}console.log("newarr is",o),console.log("SETTTING"),I(o),k(n)}}),Object(o.jsx)("h2",{children:"Add new"}),Object(o.jsx)(j,{addName:function(e){if(e.preventDefault(),console.log(e.target),console.log(f),console.log(y),w(f,t)&&!function(e,n){return n.find((function(n){return e===n.number}))}(y,t)){var n=t.find((function(e){return e.name===f})),o=Object(u.a)(Object(u.a)({},n),{},{number:y});O(n.id,o).then((function(e){var n=t.map((function(n){return n.name!==f?n:e}));F(n),z(!0),H(e,"UPDATED")}))}else if(w(f,t))console.log("found"),alert("".concat(f," is already added to phonebook")),h("");else{var s={name:f,number:y,id:t.length+1};m(s).then((function(e){console.log("ADDING",e);var n=t.concat(e);F(n),z(!0),H(e,"ADDED")}))}},newName:f,newNumber:y,handleNameChange:function(e){console.log(f),h(e.target.value)},handleNumberChange:function(e){P(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(x,{displayPeople:T,setPersons:c,setDisplayPeople:I,persons:t,setMessage:J,setSuccess:z})]})};r.a.render(Object(o.jsx)(y,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.50c3a552.chunk.js.map